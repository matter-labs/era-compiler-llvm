; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -O3 < %s | FileCheck %s

target datalayout = "E-p:256:256-i256:256:256-S32-a:256:256"
target triple = "eravm"

define i256 @test(i256 %a) {
; CHECK-LABEL: test:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    sub! r1, r0, r1
; CHECK-NEXT:    add 0, r0, r1
; CHECK-NEXT:    add.ne 1, r0, r1
; CHECK-NEXT:    sub.s 1, r0, r2
; CHECK-NEXT:    xor r1, r2, r1
; CHECK-NEXT:    ret
  %cmp = icmp ne i256 %a, 0
  %zext = zext i1 %cmp to i256
  %xor = xor i256 %zext, -1
  ret i256 %xor
}
