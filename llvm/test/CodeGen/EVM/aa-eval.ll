; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 2
; RUN: opt -passes=aa-eval -aa-pipeline=evm-aa,basic-aa -print-all-alias-modref-info -disable-output < %s 2>&1 | FileCheck %s

target datalayout = "E-p:256:256-i256:256:256-S256-a:256:256"
target triple = "evm"

declare void @llvm.evm.extcodecopy(i256, ptr addrspace(1), ptr addrspace(4), i256)
declare i256 @llvm.evm.create(i256, ptr addrspace(1), i256)
declare i256 @llvm.evm.call(i256, i256, i256, ptr addrspace(1), i256, ptr addrspace(1), i256)
declare i256 @llvm.evm.callcode(i256, i256, i256, ptr addrspace(1), i256, ptr addrspace(1), i256)
declare i256 @llvm.evm.delegatecall(i256, i256, ptr addrspace(1), i256, ptr addrspace(1), i256)
declare i256 @llvm.evm.create2(i256, ptr addrspace(1), i256, i256)
declare i256 @llvm.evm.staticcall(i256, i256, ptr addrspace(1), i256, ptr addrspace(1), i256)
declare void @llvm.evm.return(ptr addrspace(1), i256)
declare void @llvm.evm.revert(ptr addrspace(1), i256)

; CHECK-LABEL: Function: test_offset_i8_noalias
; CHECK: NoAlias: i8 addrspace(1)* %inttoptr1, i8 addrspace(1)* %inttoptr2
define void @test_offset_i8_noalias(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i8
  %add1 = add i8 %ptrtoint, 32
  %inttoptr1 = inttoptr i8 %add1 to ptr addrspace(1)
  store i8 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i8 %ptrtoint, 33
  %inttoptr2 = inttoptr i8 %add2 to ptr addrspace(1)
  store i8 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_i512_noalias
; CHECK: NoAlias: i512 addrspace(1)* %inttoptr1, i512 addrspace(1)* %inttoptr2
define void @test_offset_i512_noalias(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i512
  %add1 = add i512 %ptrtoint, 32
  %inttoptr1 = inttoptr i512 %add1 to ptr addrspace(1)
  store i512 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i512 %ptrtoint, 96
  %inttoptr2 = inttoptr i512 %add2 to ptr addrspace(1)
  store i512 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_mustalias
; CHECK: MustAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_mustalias(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %inttoptr1 = inttoptr i256 %ptrtoint to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %inttoptr2 = inttoptr i256 %ptrtoint to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_noalias1
; CHECK: NoAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_noalias1(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = add i256 %ptrtoint, 32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i256 %ptrtoint, 64
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_noalias2
; CHECK: NoAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_noalias2(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = add i256 %ptrtoint, -32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i256 %ptrtoint, -64
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_noalias3
; CHECK: NoAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_noalias3(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = sub i256 %ptrtoint, 32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = sub i256 %ptrtoint, 64
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_partialalias1
; CHECK: PartialAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_partialalias1(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = add i256 %ptrtoint, 32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i256 %ptrtoint, 48
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_partialalias2
; CHECK: PartialAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_partialalias2(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = add i256 %ptrtoint, -32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = add i256 %ptrtoint, -48
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_offset_partialalias3
; CHECK: PartialAlias: i256 addrspace(1)* %inttoptr1, i256 addrspace(1)* %inttoptr2
define void @test_offset_partialalias3(ptr addrspace(1) %addr) {
  %ptrtoint = ptrtoint ptr addrspace(1) %addr to i256
  %add1 = sub i256 %ptrtoint, 32
  %inttoptr1 = inttoptr i256 %add1 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %inttoptr1, align 1
  %add2 = sub i256 %ptrtoint, 48
  %inttoptr2 = inttoptr i256 %add2 to ptr addrspace(1)
  store i256 58, ptr addrspace(1) %inttoptr2, align 1
  ret void
}

; CHECK-LABEL: Function: test_as1_i8_noalias
; CHECK: NoAlias: i8 addrspace(1)* %ptr1, i8 addrspace(1)* %ptr2
define void @test_as1_i8_noalias() {
  %ptr1 = inttoptr i8 32 to ptr addrspace(1)
  %ptr2 = inttoptr i8 64 to ptr addrspace(1)
  store i8 2, ptr addrspace(1) %ptr1, align 64
  store i8 1, ptr addrspace(1) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_unknown_as
; CHECK: MayAlias: i256 addrspace(1)* %ptr1, i256 addrspace(10)* %ptr2
define void @test_unknown_as() {
  %ptr1 = inttoptr i256 32 to ptr addrspace(1)
  %ptr2 = inttoptr i256 64 to ptr addrspace(10)
  store i256 2, ptr addrspace(1) %ptr1, align 64
  store i256 1, ptr addrspace(10) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_mayalias
; CHECK: MayAlias: i256* %0, i256* %1
define void @test_mayalias(ptr %0, ptr %1) {
  store i256 2, ptr %0, align 64
  store i256 1, ptr %1, align 64
  ret void
}

; CHECK-LABEL: Function: test_noalias_fallback
; CHECK: NoAlias: i256* %0, i256* %1
define void @test_noalias_fallback(ptr noalias %0, ptr noalias %1) {
  store i256 2, ptr %0, align 64
  store i256 1, ptr %1, align 64
  ret void
}

; CHECK-LABEL: Function: test_noalias
; CHECK: NoAlias: i256* %ptr0, i256 addrspace(1)* %ptr1
; CHECK: NoAlias: i256* %ptr0, i256 addrspace(2)* %ptr2
; CHECK: NoAlias: i256 addrspace(1)* %ptr1, i256 addrspace(2)* %ptr2
; CHECK: NoAlias: i256* %ptr0, i256 addrspace(4)* %ptr4
; CHECK: NoAlias: i256 addrspace(1)* %ptr1, i256 addrspace(4)* %ptr4
; CHECK: NoAlias: i256 addrspace(2)* %ptr2, i256 addrspace(4)* %ptr4
; CHECK: NoAlias: i256* %ptr0, i256 addrspace(5)* %ptr5
; CHECK: NoAlias: i256 addrspace(1)* %ptr1, i256 addrspace(5)* %ptr5
; CHECK: NoAlias: i256 addrspace(2)* %ptr2, i256 addrspace(5)* %ptr5
; CHECK: NoAlias: i256 addrspace(4)* %ptr4, i256 addrspace(5)* %ptr5
; CHECK: NoAlias: i256* %ptr0, i256 addrspace(6)* %ptr6
; CHECK: NoAlias: i256 addrspace(1)* %ptr1, i256 addrspace(6)* %ptr6
; CHECK: NoAlias: i256 addrspace(2)* %ptr2, i256 addrspace(6)* %ptr6
; CHECK: NoAlias: i256 addrspace(4)* %ptr4, i256 addrspace(6)* %ptr6
; CHECK: NoAlias: i256 addrspace(5)* %ptr5, i256 addrspace(6)* %ptr6
define void @test_noalias() {
  %ptr0 = inttoptr i256 32 to ptr
  %ptr1 = inttoptr i256 32 to ptr addrspace(1)
  %ptr2 = inttoptr i256 32 to ptr addrspace(2)
  %ptr4 = inttoptr i256 32 to ptr addrspace(4)
  %ptr5 = inttoptr i256 32 to ptr addrspace(5)
  %ptr6 = inttoptr i256 32 to ptr addrspace(6)
  store i256 1, ptr %ptr0, align 64
  store i256 1, ptr addrspace(1) %ptr1, align 64
  store i256 1, ptr addrspace(2) %ptr2, align 64
  store i256 1, ptr addrspace(4) %ptr4, align 64
  store i256 1, ptr addrspace(5) %ptr5, align 64
  store i256 1, ptr addrspace(6) %ptr6, align 64
  ret void
}

; CHECK-LABEL: Function: test_as1_noalias
; CHECK: NoAlias: i256 addrspace(1)* %ptr1, i256 addrspace(1)* %ptr2
define void @test_as1_noalias() {
  %ptr1 = inttoptr i256 32 to ptr addrspace(1)
  %ptr2 = inttoptr i256 64 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr1, align 64
  store i256 1, ptr addrspace(1) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as1_mustalias
; CHECK: MustAlias: i256 addrspace(1)* %ptr1, i256 addrspace(1)* %ptr2
define void @test_as1_mustalias() {
  %ptr1 = inttoptr i256 32 to ptr addrspace(1)
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr1, align 64
  store i256 1, ptr addrspace(1) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as1_partialalias
; CHECK: PartialAlias: i256 addrspace(1)* %ptr1, i256 addrspace(1)* %ptr2
define void @test_as1_partialalias() {
  %ptr1 = inttoptr i256 32 to ptr addrspace(1)
  %ptr2 = inttoptr i256 48 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr1, align 64
  store i256 1, ptr addrspace(1) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as5_noalias
; CHECK: NoAlias: i256 addrspace(5)* %ptr1, i256 addrspace(5)* %ptr2
define void @test_as5_noalias() {
  %ptr1 = inttoptr i256 0 to ptr addrspace(5)
  %ptr2 = inttoptr i256 1 to ptr addrspace(5)
  store i256 2, ptr addrspace(5) %ptr1, align 64
  store i256 1, ptr addrspace(5) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as5_mustalias
; CHECK: MustAlias: i256 addrspace(5)* %ptr1, i256 addrspace(5)* %ptr2
define void @test_as5_mustalias() {
  %ptr1 = inttoptr i256 0 to ptr addrspace(5)
  %ptr2 = inttoptr i256 0 to ptr addrspace(5)
  store i256 2, ptr addrspace(5) %ptr1, align 64
  store i256 1, ptr addrspace(5) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as6_noalias
; CHECK: NoAlias: i256 addrspace(6)* %ptr1, i256 addrspace(6)* %ptr2
define void @test_as6_noalias() {
  %ptr1 = inttoptr i256 0 to ptr addrspace(6)
  %ptr2 = inttoptr i256 1 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr1, align 64
  store i256 1, ptr addrspace(6) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as6_mustalias
; CHECK: MustAlias: i256 addrspace(6)* %ptr1, i256 addrspace(6)* %ptr2
define void @test_as6_mustalias() {
  %ptr1 = inttoptr i256 0 to ptr addrspace(6)
  %ptr2 = inttoptr i256 0 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr1, align 64
  store i256 1, ptr addrspace(6) %ptr2, align 64
  ret void
}

; CHECK-LABEL: Function: test_as6_as5_alias_create
; CHECK: Both ModRef:  Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.create
; CHECK: Both ModRef:  Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.create
define i256 @test_as6_as5_alias_create(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.create(i256 0, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_create
; CHECK: Just Ref:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.create
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.create
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.create
define i256 @test_as1_alias_create(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.create(i256 0, ptr addrspace(1) null, i256 33)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_alias_create
; CHECK: Both ModRef:  Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.create2
; CHECK: Both ModRef:  Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.create2
define i256 @test_as6_as5_alias_create2(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.create2(i256 0, ptr addrspace(1) null, i256 1, i256 0)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_create2
; CHECK: Just Ref:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.create2
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.create2
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.create2
define i256 @test_as1_alias_create2(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.create2(i256 0, ptr addrspace(1) null, i256 33, i256 0)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_alias_call
; CHECK: Both ModRef: Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.call
; CHECK: Both ModRef: Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.call
define i256 @test_as6_as5_alias_call(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.call(i256 1, i256 1, i256 1, ptr addrspace(1) null, i256 1, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_call
; CHECK: Both ModRef:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.call
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.call
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.call
define i256 @test_as1_alias_call(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.call(i256 1, i256 1, i256 1, ptr addrspace(1) null, i256 33, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_alias_staticcall
; CHECK: Both ModRef: Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.staticcall
; CHECK: Both ModRef: Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.staticcall
define i256 @test_as6_as5_alias_staticcall(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.staticcall(i256 1, i256 1, ptr addrspace(1) null, i256 1, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_staticcall
; CHECK: Both ModRef:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.staticcall
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.staticcall
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.staticcall
define i256 @test_as1_alias_staticcall(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.staticcall(i256 1, i256 1, ptr addrspace(1) null, i256 33, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_callcode
; CHECK: Both ModRef: Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.callcode
; CHECK: Both ModRef: Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.callcode
define i256 @test_as6_as5_callcode(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.callcode(i256 1, i256 1, i256 1, ptr addrspace(1) null, i256 1, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_callcode
; CHECK: Both ModRef:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.callcode
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.callcode
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.callcode
define i256 @test_as1_alias_callcode(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.callcode(i256 1, i256 1, i256 1, ptr addrspace(1) null, i256 33, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_alias_delegatecall
; CHECK: Both ModRef: Ptr: i256* %ptr1	<->  %ret = call i256 @llvm.evm.delegatecall
; CHECK: Both ModRef: Ptr: i256* %ptr2	<->  %ret = call i256 @llvm.evm.delegatecall
define i256 @test_as6_as5_alias_delegatecall(ptr addrspace(5) %ptr1) {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  %ret = call i256 @llvm.evm.delegatecall(i256 1, i256 1, ptr addrspace(1) null, i256 1, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as1_alias_delegatecall
; CHECK: Both ModRef:  Ptr: i256* %ptr1  <->  %ret = call i256 @llvm.evm.delegatecall
; CHECK: Just Ref:  Ptr: i256* %ptr2  <->  %ret = call i256 @llvm.evm.delegatecall
; CHECK: NoModRef:  Ptr: i256* %ptr3  <->  %ret = call i256 @llvm.evm.delegatecall
define i256 @test_as1_alias_delegatecall(ptr addrspace(1) %ptr1) {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  %ptr3 = inttoptr i256 64 to ptr addrspace(1)
  store i256 3, ptr addrspace(1) %ptr3, align 32
  %ret = call i256 @llvm.evm.delegatecall(i256 1, i256 1, ptr addrspace(1) null, i256 33, ptr addrspace(1) null, i256 1)
  ret i256 %ret
}

; CHECK-LABEL: Function: test_as6_as5_alias_revert
; CHECK: NoModRef:  Ptr: i256* %ptr1	<->  call void @llvm.evm.revert
; CHECK: NoModRef:  Ptr: i256* %ptr2	<->  call void @llvm.evm.revert
define void @test_as6_as5_alias_revert(ptr addrspace(5) %ptr1) noreturn {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  call void @llvm.evm.revert(ptr addrspace(1) null, i256 0)
  unreachable
}

; CHECK-LABEL: Function: test_as1_alias_revert
; CHECK: Just Ref:  Ptr: i256* %ptr1	<->  call void @llvm.evm.revert
; CHECK: NoModRef:  Ptr: i256* %ptr2	<->  call void @llvm.evm.revert
define void @test_as1_alias_revert(ptr addrspace(1) %ptr1) noreturn {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  call void @llvm.evm.revert(ptr addrspace(1) null, i256 32)
  unreachable
}

; CHECK-LABEL: Function: test_as6_as5_alias_return
; CHECK: Just Ref:  Ptr: i256* %ptr1	<->  call void @llvm.evm.return
; CHECK: Just Ref:  Ptr: i256* %ptr2	<->  call void @llvm.evm.return
define void @test_as6_as5_alias_return(ptr addrspace(5) %ptr1) noreturn {
  store i256 1, ptr addrspace(5) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(6)
  store i256 2, ptr addrspace(6) %ptr2, align 32
  call void @llvm.evm.return(ptr addrspace(1) null, i256 0)
  unreachable
}

; CHECK-LABEL: Function: test_as1_alias_return
; CHECK: Just Ref:  Ptr: i256* %ptr1	<->  call void @llvm.evm.return
; CHECK: NoModRef:  Ptr: i256* %ptr2	<->  call void @llvm.evm.return
define void @test_as1_alias_return(ptr addrspace(1) %ptr1) noreturn {
  store i256 1, ptr addrspace(1) %ptr1, align 32
  %ptr2 = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr2, align 32
  call void @llvm.evm.return(ptr addrspace(1) null, i256 32)
  unreachable
}

; CHECK-LABEL: Function: test_as1_alias_extcodecopy
; CHECK: Just Mod:  Ptr: i256* null     <->  call void @llvm.evm.extcodecopy
; CHECK: NoModRef:  Ptr: i256* %ptr	<->  call void @llvm.evm.extcodecopy
define void @test_as1_alias_extcodecopy() {
  store i256 1, ptr addrspace(1) null, align 32
  %ptr = inttoptr i256 32 to ptr addrspace(1)
  store i256 2, ptr addrspace(1) %ptr, align 32
  call void @llvm.evm.extcodecopy(i256 0, ptr addrspace(1) null, ptr addrspace(4) null, i256 32)
  ret void
}
