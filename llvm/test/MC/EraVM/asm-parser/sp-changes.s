; RUN: llvm-mc -triple eravm -filetype=asm %s -o - | FileCheck %s

  .text
foo:

  add stack-=[r1], r1, r2
  add stack-=[42], r1, r2
  add stack-=[r1+42], r1, r2
  add r0, r1, stack+=[r1]
  add r0, r1, stack+=[42]
  add r0, r1, stack+=[r1+42]
  add stack-=[r1+42], r1, stack+=[r1+42]

  nop r0, r0, stack+=[r1+42]
  nop stack+=[r1+42]
  nop stack-=[r1+42], r0, r0
  nop stack-=[r1+42]

  nop r0, r0, r0
  nop

; COM: Autogenerated checks below, see README.md.
; CHECK:  .text
; CHECK:foo:

; CHECK:  add  stack-=[0 + r1], r1, r2
; CHECK:  add  stack-=[42], r1, r2
; CHECK:  add  stack-=[42 + r1], r1, r2
; CHECK:  add  r0, r1, stack+=[0 + r1]
; CHECK:  add  r0, r1, stack+=[42]
; CHECK:  add  r0, r1, stack+=[42 + r1]
; CHECK:  add  stack-=[42 + r1], r1, stack+=[42 + r1]

; CHECK:  nop  stack+=[42 + r1]
; CHECK:  nop  stack+=[42 + r1]
; CHECK:  nop  stack-=[42 + r1]
; CHECK:  nop  stack-=[42 + r1]

; CHECK:  nop
; CHECK:  nop
